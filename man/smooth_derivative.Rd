% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fct_.R
\name{smooth_derivative}
\alias{smooth_derivative}
\title{计算模型在指定点的平滑导数 (数值微分)}
\usage{
smooth_derivative(fit, x_points, h_factor = 0.001, shrink_factor = 0.1)
}
\arguments{
\item{fit}{模型对象。支持 predict 方法返回矩阵或数据框的模型 (如 rms::cph, survival::coxph)。}

\item{x_points}{数值向量。需要计算导数的 x 坐标点。}

\item{h_factor}{数值。基础步长系数，基于 IQR 计算。}

\item{shrink_factor}{数值。在左侧边缘区域的步长缩放因子。}

\item{var_name}{字符型。模型中对应的变量名（用于构建 newdata）。}
}
\value{
返回一个数值向量，表示对应 x 点的导数（斜率）。
}
\description{
使用中心差分法 (Central Difference) 计算拟合模型的导数。
针对数据分布采用了自适应步长策略，并利用向量化操作优化了预测性能。
}
\examples{
# 假设 fit 是一个 cph 模型，计算 Age 变量在不同点的效应变化率
# smooth_derivative(fit, data$Age, "Age")
}
